CONSOLE_NONE=0;CONSOLE_ERROR=1;CONSOLE_WARN=
2;CONSOLE_INFO=3;CONSOLE_DEBUG=4;CONSOLE_LOG=5;CONSOLE_ALL=9;var P=function(a){for(var b=CONSOLE_NONE,e=a.console,d=/(iphone|ipad|ipod|android)/.test(navigator.userAgent.toLowerCase()),c={},k=[],j,f,l=["error","warn","info","debug","log"],o="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),r=o.length;--r>=0;)(function(g){c[g]=function(){b!==0&&e&&e[g]&&e[g].apply(e,arguments)}})(o[r]);for(r=l.length;--r>=0;)(function(g,u){c[u]=
function(){k.push([u].concat(Array.prototype.slice.call(arguments)));if(j&&(f||!e||!e.log))j.apply(a,arguments);if((b>0?b>g:l.length+b<=g)&&e)try{e[u]?d?e[u].call(e,arguments.join(" ")):e[u].apply(e,arguments):d?e.log.call(e,arguments.join(" ")):e.log.apply(e,arguments)}catch(x){e.log(Array.prototype.slice.call(arguments).join(" "))}}})(r,l[r]);c.getLogs=function(){return k};c.setCallback=function(g,u){j=g;f=!!u};c.setLevel=function(g){b=Number(g)};return c}(window);window.debug=P;(function(a){function b(V,T){var O=/^\w+\:\/\//,da;if(typeof V!=c)V="";if(typeof T!=c)T="";da=(O.test(V)?"":T)+V;return(O.test(da)?"":da.charAt(0)==="/"?ga:ba)+da}function e(V,T){function O(m,J){if(m[l]&&m[l]!==x&&m[l]!=="loaded"||J[v])return L;m[C]=m[t]=i;return D}function da(m,J,W){if((W=!!W)||O(m,J)){J[v]=D;for(var Q in p)if(p[E](Q)&&!p[Q][v])return;Zb=D;$b()}}function Y(m){if(w.call(m[r])===n){m[r]();m[r]=i}}function R(m,
J){if(O(m,J)){J[o]=D;G(function(){I[J[s]].removeChild(m);Y(J)},0)}}function pc(m,J){if(m[l]===4){m[t]=F;J[o]=D;G(function(){Y(J)},0)}}function ma(m,J,W,Q,oa,ya){var A=m[s];G(function(){if("item"in I[A]){if(!I[A][0]){G(arguments.callee,25);return}I[A]=I[A][0]}var M=N.createElement(f);if(typeof W==c)M.type=W;if(typeof Q==c)M.charset=Q;if(w.call(oa)===n){M[C]=M[t]=function(){oa(M,m)};M.src=J;if(U)M.async=L}I[A].insertBefore(M,A===k?I[A].firstChild:i);if(typeof ya==c){M.text=ya;da(M,m,D)}},0)}function ta(m,
J,W,Q){H[m[g]]=D;ma(m,J,W,Q,da)}function na(m,J,W,Q){var oa=arguments;if(ia&&m[o]==i){m[o]=L;ma(m,J,h,Q,R)}else if(!ia&&m[o]!=i&&!m[o])m[r]=function(){na.apply(i,oa)};else ia||ta.apply(i,oa)}function bb(m,J,W,Q){var oa=arguments,ya;if(ia&&m[o]==i){m[o]=L;ya=m.xhr=B?new B("Microsoft.XMLHTTP"):new a.XMLHttpRequest;ya[t]=function(){pc(ya,m)};ya.open("GET",J);ya.send("")}else if(!ia&&m[o]!=i&&!m[o])m[r]=function(){bb.apply(i,oa)};else if(!ia){H[m[g]]=D;ma(m,J,W,Q,i,m.xhr.responseText);m.xhr=i}}function tb(m){if(m.allowDup==
i)m.allowDup=T.dupe;var J=m.type,W=m.charset,Q=m.allowDup;m=b(m.src,qc);var oa=b(m).indexOf(ga)===0;if(typeof W!=c)W=i;Q=!!Q;if(Q=!Q){if(!(Q=H[m]!=i)){if(!(Q=ia&&p[m]))a:{for(var ya=-1;Q=ha[++ya];)if(typeof Q.src==c&&m===b(Q.src)&&Q.type!==h){Q=D;break a}Q=L}Q=Q}Q=Q}if(Q)p[m]!=i&&p[m][o]&&!p[m][v]&&oa&&da(i,p[m],D);else{if(p[m]==i)p[m]={};Q=p[m];if(Q[s]==i)Q[s]=pa;Q[v]=L;Q[g]=m;Kb=D;if(!cb&&Ab&&oa)bb(Q,m,J,W);else!cb&&Bb?na(Q,m,J,W):ta(Q,m,J,W)}}function ub(m){V&&!cb&&Ca.push(m);if(!V||db)m()}function eb(m){var J=
[],W;for(W=-1;++W<m.length;)if(w.call(m[W])===q)J=J.concat(eb(m[W]));else J[J.length]=m[W];return J}V=!!V;if(T==i)T=aa;var Zb=L,db=V&&T[u],Bb=db&&T.cache,cb=db&&T.order,Ab=db&&T.xhr,Pa=T[z],pa=T.which,qc=T.base,$b=F,Kb=L,Cb,ia=D,p={},Ca=[],ua=i;db=Bb||Ab||cb;Cb={script:function(){K(ua);var m=eb(arguments),J=Cb,W;if(Pa)for(W=-1;++W<m.length;){if(W===0)ub(function(){tb(typeof m[0]==c?{src:m[0]}:m[0])});else J=J.script(m[W]);J=J.wait()}else ub(function(){for(W=-1;++W<m.length;)tb(typeof m[W]==c?{src:m[W]}:
m[W])});ua=G(function(){ia=L},5);return J},wait:function(m){K(ua);ia=L;w.call(m)===n||(m=F);var J=e(D,T),W=J.trigger,Q=function(){try{m()}catch(ya){}W()};delete J.trigger;var oa=function(){if(Kb&&!Zb)$b=Q;else Q()};V&&!Kb?Ca.push(oa):ub(oa);return J}};if(V)Cb.trigger=function(){for(var m,J=-1;m=Ca[++J];)m();Ca=[]};return Cb}function d(V){var T,O={},da={UseCachePreload:"cache",UseLocalXHR:"xhr",UsePreloading:u,AlwaysPreserveOrder:z,AllowDuplicates:"dupe"},Y={AppendTo:s,BasePath:"base"};for(T in da)Y[T]=
da[T];O.order=!!aa.order;for(T in Y)if(Y[E](T)&&aa[Y[T]]!=i)O[Y[T]]=V[T]!=i?V[T]:aa[Y[T]];for(T in da)if(da[E](T))O[da[T]]=!!O[da[T]];if(!O[u])O.cache=O.order=O.xhr=L;O.which=O.which===k||O.which===j?O.which:k;return O}var c="string",k="head",j="body",f="script",l="readyState",o="preloaddone",r="loadtrigger",g="srcuri",u="preload",x="complete",v="done",s="which",z="preserve",t="onreadystatechange",C="onload",E="hasOwnProperty",h="script/cache",n="[object Function]",q="[object Array]",i=null,D=true,
L=false,N=a.document,B=a.ActiveXObject,G=a.setTimeout,K=a.clearTimeout,w=Object.prototype.toString,F=function(){},I={},H={},ba=/^[^?#]*\//.exec(a.location.href)[0],ga=/^\w+\:\/\/\/?[^\/]+/.exec(ba)[0],ha=N.getElementsByTagName(f),xa=a.opera&&w.call(a.opera)=="[object Opera]",S="MozAppearance"in N.documentElement.style,U=N.createElement(f).async===true,aa={cache:!(S||xa),order:S||xa||U,xhr:D,dupe:D,base:"",which:k};aa[z]=L;aa[u]=D;I[k]=N.head||N.getElementsByTagName(k);I[j]=N.getElementsByTagName(j);
a.$LAB={setGlobalDefaults:function(V){aa=d(V)},setOptions:function(V){return e(L,d(V))},script:function(){return e().script.apply(i,arguments)},wait:function(){return e().wait.apply(i,arguments)}};(function(V,T,O){if(N[l]==i&&N[V]){N[l]="loading";N[V](T,O=function(){N.removeEventListener(T,O,L);N[l]=x},L)}})("addEventListener","DOMContentLoaded")})(window);(function(){var a=false,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.MingClass=function(){};MingClass.extend=function(e){function d(){!a&&this.init&&this.init.apply(this,arguments)}var c=this.prototype;a=true;var k=new this;a=false;for(var j in e)k[j]=typeof e[j]=="function"&&typeof c[j]=="function"&&b.test(e[j])?function(f,l){return function(){var o=
this._super;this._super=c[f];var r=l.apply(this,arguments);this._super=o;return r}}(j,e[j]):e[j];d.prototype=k;d.constructor=d;d.extend=arguments.callee;return d}})();XHR=function(){function a(e){try{return JSON.parse(e)}catch(d){return e}}function b(e,d,c,k,j,f){var l=/^(\w+:)?\/\/([^\/?#]+)/.exec(d);l=l&&(l[1]&&l[1].toLowerCase()!==
location.protocol||l[2].toLowerCase()!==location.host);var o=window.XDomainRequest&&l?new XDomainRequest:window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(f==="script"&&e==="GET"&&l){var r=document.getElementsByTagName("head")[0]||document.documentElement,g=document.createElement("script"),u=false;g.src=d;g.onload=g.onreadystatechange=function(){if(!u&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){u=true;g.onload=g.onreadystatechange=
null;r&&g.parentNode&&r.removeChild(g)}};r.insertBefore(g,r.firstChild);return true}o.open(e,d,!!k);if(o.setRequestHeader){o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l||o.setRequestHeader("X-Requested-With","XMLHttpRequest")}if(j)o.withCredentials=true;if(k)o.onreadystatechange=function(){o.readyState===4&&k.call(o,a(o.responseText),o.status)};o.send(c);return k?true:a(o.responseText)}this.get=function(e,d){return b("GET",e,null,d)};this.getWithCredentials=function(e,d){return b("GET",
e,null,d,true)};this.getJson=function(e,d){return b("GET",e,null,null,d,"script")};this.post=function(e,d,c){return b("POST",e,d,c)};this.postWithCredentials=function(e,d,c){return b("POST",e,d,c,true)};this.request=b};window.XHR=XHR;ICanHas=function(a,b){return{cors:function(){var e=b.XDomainRequest||b.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;if(e){e=new Boolean(e);e.withCredentials=!window.XDomainRequest}return e}(),orientation:window.orientation!==void 0,touch:"ontouchstart"in b,video:function(){var e=a.createElement("video"),
d=!!e.canPlayType;if(d){d=new Boolean(d);d.vp6=e.canPlayType('video/x-flv; codecs="vp6"')||false;d.vp8=e.canPlayType('video/webm; codecs="vp8,vorbis"')||false;d.h264=navigator.userAgent.toLowerCase().search("android")>-1?"probably":e.canPlayType('video/mp4; codecs="avc1.42E01E"')||e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')||false}return d}()}}(document,window);FlashDetect=function(){var a=navigator,b=false,e=0,d=0,c=0,k=null,j=null;if(a.plugins&&a.plugins.length){if((a=a.plugins["Shockwave Flash"])&&a.description){k=a.description;b=true}}else if(a.mimeTypes&&a.mimeTypes.length){if((a=a.mimeTypes["application/x-shockwave-flash"])&&a.enabledPlugin)b=true}else try{k=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version");b=true}catch(f){}if(k){j=k.replace(/\D+/g,".").replace(/^\./,"");a=j.split(".");e=parseInt(a[0],
10);d=parseInt(a[1],10);c=parseInt(a[2],10)}return{installed:b,raw:k,version:j,major:e,minor:d,revision:c,versionAtLeast:function(l,o,r){l=l||10;o=o||0;r=r||0;var g=[e,d,c],u=arguments,x=Math.min(g.length,u.length),v;for(v=0;v<x;v++)if(g[v]>=u[v]){if(!(v+1<x&&g[v]===u[v]))return true}else return false}}}();$m={};(function(a){function b(h,n,q){if(a.type(q)!=="array"||q===l)q=[q];for(var i=0,D=q.length;i<D;i++)q[i][h]||(q[i][h]=n);a[h]=function(){var L=Array.prototype.slice.call(arguments),N=L.shift();return n.apply(N,L)}}function e(h,n,q,i){q[h]=
n;i.push(h);i.length>1E3&&delete q[i.shift()];return n}function d(h,n){if(h in n)return n[h];return false}function c(){var h=this.valueOf();return h<0?~~h-1:~~h}function k(h,n){return this<n?h>this?h:this:n}function j(h,n){var q=this.valueOf()+"";return Array(h-q.length+1).join(n||"0")+q}if(!window.Element)window.Element={};for(var f=document,l=Array.prototype,o=!window.HTMLElement?{}:HTMLElement.prototype,r=!window.NodeList?{}:NodeList.prototype,g=Number.prototype,u=String.prototype,x=window,v={},
s=[],z="Boolean Number String Function Array Date RegExp Object".split(" "),t=[],C=0,E=z.length;C<E;C++)t["[object "+z[C]+"]"]=z[C].toLowerCase();a.type=function(h){return h==null?String(h):t[Object.prototype.toString.call(h)]||"object"};a.isArray=function(h){return a.type(h)==="array"};a.emptyFunction=function(){};a.clone=function(h){var n=a.isArray(h)?[]:{};for(C in h)if(C!=="clone")n[C]=h[C]&&a.type(h[C])==="object"?a.clone(h[C]):h[C];return n};a.addEventListener=function(h,n,q){window.addEventListener?
h.addEventListener(n,q,false):h.attachEvent("on"+n,q)};a.removeEventListener=function(h,n,q){window.removeEventListener?h.removeEventListener(n,q,false):h.detachEvent("on"+n,q)};a.findKey=function(h,n){for(var q in n)if(n.hasOwnProperty(q)&&n[q]===h)return q;return false};a.fibonacci=function(h){var n=Math.sqrt(5);return(1/n*Math.pow((1+n)/2,h)-1/n*Math.pow((1-n)/2,h)).round()};a.withinElement=function(h,n){var q=n.relatedTarget;try{if(q&&q!==document&&!q.parentNode)return true;for(;q&&q!==h;)q=q.parentNode;
if(q!==h)return false}catch(i){}return true};b("abs",function(){var h=this.valueOf();return h<0?-h:h},g);b("addClass",function(h){if(this.length&&this.forEach)this.forEach(function(n){a.addClass(n,h)});else if(!a.hasClass(this,h))this.className=this.className.split(" ").concat(h).unique().join(" ").trim();return this},[o,r]);b("attr",function(h,n){if(a.type(h)==="object"){for(prop in h)this.setAttribute(prop,h[prop]);return this}if(n===void 0)return this.getAttribute(h);n===null||n===""?this.removeAttribute(h):
this.setAttribute(h,n);return this},o);b("ceil",function(){return c.call(this.valueOf()+1)},g);b("clamp",function(h,n,q){function i(){if(checkCount>200)return false;if(D.innerText!=h||D[property]==0){checkCount++;setTimeout(i,1)}else a:if(!(D[property]<=q)){for(;D[property]>q;){D.innerText=D.innerText.substr(0,D.innerText.length-1);if(D.innerText==""||D.innerText.length==0)break a}D.innerText=D.innerText.substr(0,D.innerText.length-3)+"..."}}var D=this;D.innerHTML=h;property=n=="height"?"clientHeight":
"clientWidth";checkCount=0;i();return D},o);b("clear",function(){this.childNodes.forEach(function(h){h.remove&&h.remove()});return this},o);b("computeStyle",function(h){if(!x.getComputedStyle)x.getComputedStyle=function(n){this.el=n;this.getPropertyValue=function(q){var i=/(\-([a-z]){1})/g;if(q=="float")q="styleFloat";if(i.test(q))q=q.replace(i,function(D,L,N){return N.toUpperCase()});return n.currentStyle&&n.currentStyle[q]?n.currentStyle[q]:null};return this};return x.getComputedStyle(this,null).getPropertyValue(h)},
o);b("contains",function(h){return this.indexOf(h)!==-1},[l,u]);b("css",function(h,n){if(a.type(h)==="object"){for(prop in h)this.style[prop]=h[prop];return this}if(n===void 0)return this.style[h];this.style[h]=n===null||n===""?"":n;return this},o);b("floor",c,g);b("forEach",function(h,n){if(a.type(h)==="function")for(var q=this.length>>>0,i=0;i<q;i++)i in this&&h.call(n,this[i],i,this)},[l,r]);b("getElementsByClassName",function(h){var n=[],q=0,i,D,L;if(document.evaluate){i=".//*[contains(concat(' ', @class, ' '), ' "+
h+" ')]";for(D=document.evaluate(i,this,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);L=D.snapshotItem(q++);)n[n.length]=L}else{i=RegExp("(^|\\s)"+h+"(\\s|$)");D=this.getElementsByTagName("*");q=0;for(var N=D.length;q<N;q++){L=D[q];if(L.className===h||i.test(L.className))n[n.length]=L}}return n},f);b("hasAncestor",function(h){if(h===this)return true;for(var n=this.parentNode;n;){if(n===h)return true;n=n.parentNode}return false},o);b("hasClass",function(h){if(h.splice){for(var n=this.className.split(" "),
q=0,i=n.length;q<i;q++)if(h.contains(n[q]))return true;return false}return RegExp("(?:^|\\s+)"+h+"(?:\\s+|$)").test(this.className)},o);b("hex2rgb",function(){if(cached=d(this,v))return cached;var h=parseInt(this.replace("#",""),16);h=[(h&16711680)>>16,(h&65280)>>8,h&255];return e(this,"rgb("+h.join(",")+")",v,s)},u);b("html",function(h){if(h===void 0)return this.innerHTML;this.innerHTML=h;return this},o);b("indexOf",function(h){for(var n=0,q=this.length;n<q;n++)if(this[n]==h)return n;return-1},l);
b("innerHeight",function(){for(var h=0,n,q=0,i=this.childNodes.length;q<i;q++){n=this.childNodes[q];if(n.style)h+=n.clientHeight+(a.toInt(a.computeStyle(n,"margin-top"),10)||0)+(a.toInt(a.computeStyle(n,"margin-bottom",10))||0)}return h},o);b("limit",k,g);b("map",function(h,n){for(var q=this.length>>>0,i=Array(q),D=0;D<q;D++)if(D in this)i[D]=h.call(n,this[D],D,this);return i},l);b("max",function(){return Math.max.apply(Math,this)},l);b("min",function(){return Math.min.apply(Math,this)},l);b("pad",
j,[u,g]);b("position",function(){var h=0,n=0,q=this;if(q.offsetParent){do{h+=q.offsetLeft;n+=q.offsetTop}while(q=q.offsetParent)}return{x:h,y:n}},o);b("prependChild",function(h){return this.insertBefore(h,this.firstChild)},o);b("q",function(h){return this.querySelector(h)},[f,o]);b("qa",function(h){return this.querySelectorAll(h)},[f,o]);b("remove",function(){if(this.length)this.forEach(function(h){h.parentNode&&h.parentNode.removeChild(h)});else this.parentNode&&this.parentNode.removeChild(this)},
[o,r]);b("removeClass",function(h){if(this.length&&this.forEach)this.forEach(function(n){a.removeClass(n,h)});else if(a.hasClass(this,h))this.className=this.className.replace(RegExp("(?:^|\\s+)"+h+"(?:\\s+|$)","g")," ").trim();return this},[o,r]);b("rgb2hex",function(){if(cached=d(this,v))return cached;var h=this.match(/\d{1,3}/g).slice(0,3);h=h.map(function(n){return j.call(k.call(parseInt(n,10),0,255).toString(16),2)});return e(this,h.join(""),v,s)},u);b("round",function(){return c.call(this.valueOf()+
0.5)},g);b("toInt",function(h){return parseInt(this.valueOf?this.valueOf():this,h||10)},[u,g]);b("toFloat",function(h){return parseFloat(this.valueOf(),h||10)},[u,g]);b("trim",function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},u);b("ucfirst",function(){return this.charAt(0).toUpperCase()+this.slice(1)},u);b("unique",function(){var h=[],n=0,q=this.length;a:for(;n<q;n++){for(var i=0,D=h.length;i<D;i++)if(h[i]===this[n])continue a;h[h.length]=this[n]}return h},l);b("wrap",function(h,n){var q=
this,i=a.addClass(document.createElement(h),n||"");q.length||(q=Array(this));q.forEach(function(D,L){L===0&&D.parentNode.replaceChild(i,D);i.appendChild(D)});return i},[o,r])})($m);EventManager=function(){function a(d){if(!b[d]){var c=document.createElement("a");c.id="Event:"+d;e.appendChild(c);b[d]=c}return b[d]}var b={},e=document.createElement("div");e.id="events"+(new Date).getTime();document.body.appendChild(e);this.bind=function(d,c){var k=a(d);window.addEventListener?k.addEventListener("click",c,false):k.attachEvent("onclick",c);return this};
this.unbind=function(d,c){var k=a(d);window.removeEventListener?k.removeEventListener("click",c,false):k.detachEvent("onclick",c);return this};this.fire=function(d,c){var k,j=a(d);if(document.createEvent){k=document.createEvent("HTMLEvents");k.initEvent("click",false,true);k.name=d;k.data=c;return j.dispatchEvent(k)}else{k=document.createEventObject();k.name=d;k.data=c;return j.fireEvent("onclick",k)}}};window.EventManager=EventManager;var Db="ming",vb="moogaloop",gc="noplayer",rc="nomobile",ab="mobile",fc="touch",Xb="desktop",Ec="html",Dc="flash",fa="noplayer",sa="hd",nb="sd",Oa="mobile",Gc=[sa,nb,Oa],ed="pl_volume",Ac="hd_preference",Hb="onwebkittransitionend"in window?"webkitTransitionEnd":
"transitionEnd",Gb=8,fd=250,Bc=140,Cc=200,gd=265;fa=200;var Nb=7,ic=1.5,Hc=2E3,Fc=1500,Fa=1,Qa=2,Tb=3,ka=4,va=5,Ea=6,Vb=7,yb=8,hb=9,hd=10,id=11,Ic=12,Jc=13,Ob=14,Jb=15,ob=16,Kc=17,lc=18,mc=19,Yb=20,Lc=21,nc=22,oc=23,ea=24,wa=25,wb=26,Ra=27,Ub=28,la=29,Ib=30,Mc=31,Ua=32,Va=33,Wa=34,Xa=35,kb="loadProgress",lb="playProgress",jb="play",ib="pause",xb="finish",mb="seek",Na="ready",cd="error",hc="addEventListener()",sc="removeEventListener()",qb="play()",pb="pause()",rb="seekTo()",sb="unload()",Ka="setColor()",
Ya="setLoop()",Za="setVolume()",Aa="getDuration()",za="getCurrentTime()",La="getVolume()",tc="getColor()",zb="getLoop()",uc="getVideoUrl()",vc="getVideoEmbedCode()",Sa="getVideoWidth()",Ta="getVideoHeight()",Ga="paused()",Da="a",Wb="ab",Lb="ao",dc="aq",Z="bj",X="ah",kc="bd",Sb="ae",Zc="c",$c="j",ad="k",bd="l";fa="ag";fa="b";fa="c";fa="g";var Nc="ax",jd="q";fa="al";fa="cg";var Eb="x",Fb="w",fb="aa",$a="l",Mb="v",Ja="j",cc="bf",ec="bb",Vc="cl",Wc="z",bc="bu",Xc="ar",gb="bt",ac="ct",kd="ay",ra="b",wc=
"h",xc="am";fa="k";var Oc="i",ld="ci",md="az",Pb="ak";fa="cu";var nd="af",od="n";fa="at";var yc="r",pd="as",Ba="e",qa="d",Qb="ai",Rb="cd",jc="bp",Pc="bh",qd="p",rd="videos",sd="au",Ma="s",td="ch",Qc="bi",ja="m",zc="o",ud="bl",Rc="aj",vd="y";fa="da";var Sc="ce",Tc="bk",wd="bv",Uc="bq";fa="d";var Yc="bo",dd="by";if(window.$){$=$;$$=$$}var y=MingClass.extend({init:function(a,b,e){function d(){if(!ICanHas.video)return false;if(l.ie)return false;if(l.safari&&l.safari<4)return false;for(var o in c.config.video.files)if(ICanHas.video[o])return true;return false}var c=this,k=b.assets,j,f;j=navigator;
f=j.userAgent.toLowerCase();j=j.platform.toLowerCase();var l={webkit:"webkitAppearance"in document.documentElement.style?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,firefox:/firefox/.test(f)?f.replace(/^.*firefox\/(\d+\.\d+\.\d+).*$/,"$1"):false,safari:/safari/.test(f)?parseFloat(f.replace(/^.*version\/(\d+)\.(\d+)?.*$/,"$1.$2")):false,ie:navigator.appName=="Microsoft Internet Explorer",opera:window.opera&&{}.toString.call(window.opera)=="[object Opera]"||false,win:j?/win/.test(j):
/win/.test(f),mac:/mac/.test(j||f)?parseFloat(f.replace(/^.* ((\d+)(_|\.)?(\d+)?).*$/,"$2.$4")):false,linux:j?/linux/.test(j):/linux/.test(f),android:/android/.test(f)?parseFloat(f.replace(/^.* android (\d+)\.(\d+).*$/,"$1.$2")):false,playBook:/playbook/.test(f)};c.element=a;c.config=b.config;c.playerType=null;c.playerMode=null;c.playableFiles=null;c.thumbs=b.thumbs;c.api=false;c.ua=l;c.uniqueId=b.uniqueId;y.cookieDomain=c.config.request.cookie_domain;c.playerMode=function(){if(c.playerMode)return c.playerMode;
var o=Xb;if(Math.min(screen.width,screen.height)<=480||y.getCookie("test_mobiloop")=="1"||l.android&&l.android<3)o=ab;else if(ICanHas.orientation)o=fc;return o}();c.playableFiles=function(){var o=c.config.video,r=o.files,g={hd:false,sd:false,mobile:false};for(codec in r)if(ICanHas.video[codec]){if(c.playerMode===ab){if($m.contains(r[codec],Oa))g.mobile=codec;break}for(var u=0,x=r[codec].length;u<x;u++){var v=r[codec][u];if(v===sa&&!g.hd)g.hd=codec;else if(v===nb&&!g.sd)g.sd=codec;else if(v===Oa&&
!g.mobile)g.mobile=codec}}if(!c.config.security.hd_embed)g.hd=false;if(c.playerMode===fc)if(o.height*o.width>921600){P.info("Can't play HD version on iPad: too big");g.hd=false;c.config.video.hd=false}return g}();c.playerType=function(o){var r=gc;switch(o){case Dc:r=FlashDetect.installed&&FlashDetect.major>=10?vb:d()?Db:r;break;case Ec:r=c.playerMode!==ab&&!c.playableFiles.hd&&!c.playableFiles.sd?FlashDetect.installed&&FlashDetect.major>=10?vb:c.playableFiles.mobile?Db:r:d()?Db:FlashDetect.installed&&
FlashDetect.major>=10?vb:r;break}if(c.playerMode===ab&&!c.playableFiles.mobile){a:{o=c.config.video.files;for(codec in o)if($m.contains(o[codec],Oa)){o=true;break a}o=false}r=o?gc:rc}return r}(function(){var o=c.config.user.preferences.html;return o===1||l.safari>=5&&(l.mac>=10.6||l.win)&&o!==0?Ec:Dc}());f=c.playerType===vb?k.moogaloop:k.ming[c.playerMode].js;j=c.playerType===vb?[]:k.ming[c.playerMode].css;P.info("Player Type:",c.playerType);P.info("Player Mode:",c.playerMode,Math.min(screen.width,
screen.height));P.info("Screen Size:",screen.width,"x",screen.height);P.info("Can play:",ICanHas.video.h264?"h264":"");P.info("Playable Files:",c.playableFiles.hd?"hd":"",c.playableFiles.sd?"sd":"",c.playableFiles.mobile?"mobile":"");c.setThumb();$m.forEach(j,function(o){var r=document.createElement("link");$m.attr(r,{rel:"stylesheet",href:k.css_path+o+(!k.cache?(o.indexOf("?")>-1?"&":"?")+(new Date).getTime():"")});document.getElementsByTagName("head")[0].appendChild(r)});j=$LAB.setOptions({AlwaysPreserveOrder:true,
BasePath:k.js_path});k.cache||(f=$m.map(f,function(o){return o+(o.indexOf("?")>-1?"&":"?")+(new Date).getTime()}));j.script(f).wait(function(){c.api=new y.API(c.config);playerElement=a.getElementsByTagName("div")[0];$m.addClass(playerElement,c.playerType===vb?Yc:Da);c.player=new (c.playerType===vb?y.Moogaloop:c.playerType===gc||c.playerType===rc?y.NoPlayer:y.Ming)(playerElement,b.options[c.playerType===rc?gc:c.playerType],c);e&&e.call(c)});P.info("Reticulating splines...")},getConfig:function(){return this.config},
setConfig:function(a){this.config=a},setThumb:function(){var a=this.element.getElementsByTagName("div")[0].getElementsByTagName("div")[0],b=a.getAttribute("data-thumb"),e=this.thumbs[640];for(var d in this.thumbs)if(this.thumbs.hasOwnProperty(d))if(this.element.clientWidth>=d-100||this.element.clientWidth>=940){e=this.thumbs[d];break}this.config.video.thumbnail=e;if(b!==e&&this.playerType===Db){a.style.backgroundImage="url("+e+")";a.setAttribute("data-thumb",e)}}});y.setCookie=function(a,b,e,d){var c=
document.getElementById(Zc),k="";e=e||87600;d=d||y.cookieDomain;if(c){document.getElementById($c).value=a;document.getElementById(ad).value=b;document.getElementById(bd).value=e;window.addEventListener("message",function(j){j.data=="refresh"&&y.xhrRefresh()},false);c.submit()}else{if(e){c=new Date;c.setTime(c.getTime()+e*60*60*1E3);k="; expires="+c.toGMTString()}d="; domain="+d;document.cookie=a+"="+b+k+"; path=/"+d}};y.getCookie=function(a){var b=document.cookie;a=a+"=";var e;if(b&&b!==""){b=document.cookie.split(";");
for(var d=0,c=b.length;d<c;d++){e=b[d].trim();if(e.indexOf(a)===0)return unescape(e.substr(a.length))}}return null};y.eatCookie=function(a){document.cookie=a+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;"};y.xhrRefresh=function(){var a;(new XHR).get(document.location.href,function(b){a=document.getElementsByTagName("body")[0];a.innerHTML=b;$m.forEach(a.getElementsByTagName("script"),function(e){e.innerHTML&&(new Function(e.innerHTML)).call(window)})})};y.checkRatio=function(a,b,e){if(!b)return false;e=
e.video.width/e.video.height;var d=a.clientWidth/a.clientHeight;if(Math.abs(e-d)<0.02){$m.removeClass(a,Eb);$m.removeClass(a,Fb)}else if(d>e){$m.removeClass(a,Fb);$m.addClass(a,Eb)}else{$m.removeClass(a,Eb);$m.addClass(a,Fb)}$m.removeClass(b,Z)};if(!y.init)y.init={queue:[],loaderAdded:false,loader:function(){y.init.queue.length>0&&y.init.queue.shift()()}};window.Player=y;y.Moogaloop=MingClass.extend({init:function(a,b,e){function d(w,F,I){P.info("url: ",w);var H={server:z.request.vimeo_url,player_server:z.request.player_url,cdn_server:z.request.cdn_url,embed_location:z.request.referrer,force_embed:b.force_embed,force_info:b.force_info,
moogaloop_type:K,js_api:1,js_getConfig:b.ref_id+".getConfig",js_setConfig:b.ref_id+".setConfig",clip_id:z.video.id,fullscreen:1},ba={id:F.id,name:F.id,styleclass:X};if(t.ie)w+=(w.indexOf("?")>0?"&":"?")+"time="+(new Date).getTime();for(attr in I)if(I.hasOwnProperty(attr))H[attr]=I[attr];swfobject.embedSWF(w,F.id,"100%","100%","10.0.0","/assets/flash/expressInstall.swf",H,{allowscriptaccess:"always",allowfullscreen:"true",scalemode:"noscale",quality:"high",wmode:"opaque",bgcolor:"#000000"},ba,function(ga){if(t.safari&&
t.win){P.debug("Removing invisible from swfobject");$m.removeClass(ga.ref,X)}t.android&&t.android<2.2&&$m.removeClass(ga.ref,X);setTimeout(function(){if($m.hasClass(F,Ma))return w.indexOf(n)===0?s.loverLoaded():s.moogaloopLoaded();else if(G&&$m.hasClass(G,X))return w.indexOf(n)===0?s.loverThumbLoaded(true):s.moogaloopThumbLoaded(true)},2E3)})}function c(){var w="cover"+e.uniqueId;L=document.getElementById(w);if(!L){L=document.createElement("div");L.setAttribute("id",w);$m.addClass(L,dd);a.appendChild(L)}d(n,
L,{js_onLoad:b.ref_id+".player.loverLoaded",js_onThumbLoaded:b.ref_id+".player.loverThumbLoaded",js_setupMoog:b.ref_id+".player.loverInitiated"});z.embed.autoplay=1}function k(){var w="player"+e.uniqueId;N=document.getElementById(w);if(!N){N=document.createElement("div");N.setAttribute("id",w);a.appendChild(N)}d(q,N,{js_onLoad:b.ref_id+".player.moogaloopLoaded",js_onThumbLoaded:b.ref_id+".player.moogaloopThumbLoaded"})}function j(){G&&G.api_pause()}function f(){if(B)s.loverInitiated();else G&&G.api_play()}
function l(w){G&&G.api_seekTo(w.data)}function o(){G&&G.api_unload()}function r(w){z.embed.color=w.data;G&&G.api_changeColor(w.data)}function g(w){z.embed.loop=!!w.data;G&&G.api_setLoop(z.embed.loop)}function u(w){if(G){w=w.data;if(z.embed.api.version<2)w*=100;G.api_setVolume(w)}}function x(w){var F=false;switch(w.name){case za:F=G?G.api_getCurrentTime().toFixed(3):0;break;case Aa:F=G?G.api_getDuration().toFixed(3):z.video.duration;break;case La:F=G?G.api_getVolume().toFixed(3):z.user.preferences.volume/
100;break;case Ga:F=G?!!G.api_paused():true;break}E.sendBack(w.name,F)}function v(w){var F=z.embed.api.version<2?w.data:"on"+w.data.ucfirst();if(G){G.api_addEventListener(w.data,b.ref_id+".player."+F);P.debug("Adding listener",w.data,b.ref_id+".player."+F)}else{P.debug("Queuing listener",w.data,b.ref_id+".player."+F);i.push(["addEventListener",w.data,b.ref_id+".player."+F])}}P.info("Options:",b);P.info("Config:",e.config);var s=this,z=e.config,t=e.ua,C=e.playerMode===fc?Xb:e.playerMode,E=e.api,h=
E.events,n=b.swfs.cover[C],q=b.swfs.player[C+(FlashDetect.major>=10&&FlashDetect.minor>=2&&!t.linux?"_sv":"")],i=[],D,L,N,B,G,K=(C===ab?"mobi":"mooga")+"loop"+(z.embed.on_site?"_local":"");s.config=z;P.info("swfUrl: ",q,"playerMode: ",C);z.embed.api.on&&h.bind(pb,j).bind(qb,f).bind(rb,l).bind(sb,o).bind(Ka,r).bind(Ya,g).bind(Za,u).bind(za,x).bind(Aa,x).bind(La,x).bind(Ga,x).bind(hc,v);s.onProgress=function(w){h.fire(lb,w.toFloat().toFixed(3))};s.onPlayProgress=function(w){h.fire(lb,{seconds:w.seconds.toFloat().toFixed(3),
percent:w.percent.toFloat().toFixed(3),duration:w.duration.toFloat().toFixed(3)})};s.onLoading=function(w){h.fire(kb,{bytes:w.bytesLoaded.toInt(),percent:w.percent.toFloat().toFixed(3)})};s.onLoadProgress=function(w){h.fire(kb,{percent:w.percent.toFloat().toFixed(3),bytesLoaded:w.bytesLoaded.toInt(),bytesTotal:w.bytesTotal.toInt(),duration:w.duration.toFloat().toFixed(3)})};s.onPlay=function(){h.fire(jb)};s.onPause=function(){h.fire(ib)};s.onSeek=function(w){h.fire(mb,z.embed.api.version<2?w.toFloat().toFixed(3):
{seconds:w.seconds.toFloat().toFixed(3),percent:w.percent.toFloat().toFixed(3),duration:w.duration.toFloat().toFixed(3)})};s.onFinish=function(){h.fire(xb)};s.loverLoaded=function(){P.info("Lover loaded");$m.removeClass(a,Ma);B=document.getElementById("cover"+e.uniqueId);h.fire(Na);setTimeout(function(){if($m.hasClass(B,X)){P.debug("Removing invisible from loaded timeout");s.loverThumbLoaded(true)}},Fc)};s.loverThumbLoaded=function(w){P.info("Lover thumbnail loaded?",w);if(!B){B=document.getElementById("cover"+
e.uniqueId);h.fire(Na)}$m.removeClass(B,X);$m.addClass(D,Z)};s.loverInitiated=function(){P.debug("Lover play button clicked");k()};s.moogaloopLoaded=function(){$m.removeClass(a,Ma);G=document.getElementById(b.ref_id);if(B){$m.remove(B);$m.removeClass(G,X);B=null}else h.fire(Na);if(z.embed.api.on&&i.length>0)for(;i.length>0;){var w=i.shift(),F="api_"+w.shift();P.debug("Calling",F,"from queue",w);(new Function("this."+F+'("'+w.join('","')+'")')).call(G)}P.info("Welcome to Moogaloop!");setTimeout(function(){if($m.hasClass(G,
X)){P.debug("Removing invisible from loaded timeout");s.moogaloopThumbLoaded(true)}},Fc)};s.moogaloopThumbLoaded=function(w){P.info("Moog thumbnail loaded?",w);G||(G=document.getElementById(b.ref_id));$m.removeClass(G,X);$m.addClass(D,Z)};s.destroy=function(){z.embed.api.on&&h.unbind(pb,j).unbind(qb,f).unbind(rb,l).unbind(sb,o).unbind(Ka,r).unbind(Ya,g).unbind(Za,u).unbind(za,x).unbind(Aa,x).unbind(La,x)};for(D=a.getElementsByTagName("div")[0];D.nextSibling;)a.removeChild(D.nextSibling);!(z.embed.on_site||
z.embed.autoplay||z.embed.api.on||t.opera||C===ab||z.security.privacy==="password")?c():k();a.parentNode.api_seekTo=function(w){l({data:w})}}});y.NoPlayer=MingClass.extend({init:function(a,b,e){function d(){var u=Math.round(a.clientWidth/2-f.clientWidth/2),x=Math.round(a.clientHeight/2-f.clientHeight/2);f.style.left=u+"px";f.style.top=x+"px"}function c(){g.get(cssPath+"/ming_overlays.css",
function(u){r=u;k()})}function k(){var u,x=document.createElement("style");u=o.substring(o.indexOf("<style>"),o.indexOf("</style>")+8);r+=u.replace(/<(\/)?style>/g,"");o.replace(u,"");if(e.ua.ie){x.type="text/css";x.styleSheet.cssText=r}else x.appendChild(document.createTextNode(r));document.getElementsByTagName("head")[0].appendChild(x);f.innerHTML=o;if(script=f.getElementsByTagName("script")[0])setTimeout(function(){(new Function(script.innerHTML)).call(e.config)},0);setTimeout(function(){j.show()},
100)}var j=this,f=a.children[3],l=a.children[4],o,r,g=new XHR;htmlPath=b.html_path+"/ming_overlay_"+e.playerType+".php";cssPath=b.css_path;j.element=a;j.show=function(){var u=f.getElementsByTagName("div")[0];$m.removeClass(f,Z);$m.removeClass(l,Z);d();setTimeout(function(){$m.addClass(u,Rb);$m.addClass(a,qa)},10)};for(window.addEventListener?window.addEventListener("resize",d,false):window.attachEvent("onresize",d);f.previousSibling;){if(f.previousSibling.className===Wb)break;a.removeChild(f.previousSibling)}$m.removeClass(a,
Ma);(function(){g.get(htmlPath+"?"+(new Date).getTime(),function(u){o=u;c()})})()}});y.API=MingClass.extend({init:function(a){function b(t){if(!t||t==="")return false;try{return JSON.parse(t)}catch(C){var E={},h,n,q;t.split("&").forEach(function(i){h=i.split("=");n=decodeURIComponent(h[0]);q=decodeURIComponent(h[1]);
if(n!=="id"){if(n==="params")n="value";if(q.contains(","))q=q.split(",")[0];E[n]=q}});return E}}function e(t){if($m.type(t)!=="string"){t=(t=t)||{};if(r)t.player_id=r;if(o>1&&window.JSON)t=JSON.stringify(t);else{var C="method="+encodeURIComponent(t.method||t.event)+"&params=",E=[];if(t.value)E.push(encodeURIComponent(t.value));else if($m.type(t.data)==="object")for(var h in t.data)E.push(encodeURIComponent(t.data[h]));else t.data&&t.data!=="undefined"&&E.push(encodeURIComponent(t.data));t.player_id&&
E.push(t.player_id);t=C+E.join(",")}}window.parent.postMessage(t,f);P.debug("<- Sent",t)}function d(t){var C=t.name,E=t.data;if(o<2){C=$m.findKey(C,u);switch(C){case "onSeek":case "onProgress":E.percent&&delete E.percent;case "onLoading":E.duration&&delete E.duration;break}}if(l[C]===true||t.name===Na)e({event:C,data:E})}function c(t){var C=b(t.data);t=C.method;var E=C.value;if(!C||!t)return false;if(t.substr(0,4)==="api_"){t=t.substr(4);t=s[t]||t;t=t.replace("()","")}C=t+"()";if(C===hc){l[E]=true;
z.fire(hc,E);P.debug("-> Now listening for",E)}else if(C===sc){l[E]=false;z.fire(sc,E);P.debug("-> Stop listening for",E)}else if(x.contains(C)){P.debug("-> Received",t,E);switch(C){case Za:E=E.toFloat();if(o<2)E/=100;break;case Ya:E=!!E.toInt();break;case Ka:if(E.search(/^[A-Fa-f\d]+$/g)===-1||E.length!==3&&E.length!==6){P.warn("Invalid color value");return}break}z.fire(C,E)}else if(v.contains(C)){P.debug("-> Received request for",t,E);z.fire(C,E)}}function k(t){var C=false;switch(t.name){case tc:C=
a.embed.color;break;case uc:C="http://"+a.request.vimeo_url+"/"+a.video.id;break;case vc:C=a.video.embed_code;break}j.sendBack(t.name,C)}if(!a.embed.api.on){this.events=new EventManager;return false}if(!window.postMessage||!window.parent.postMessage||window.location===window.parent.location){P.warn("Player API unavailable because this browser does not support postMessage or is not loaded in an iframe.");a.embed.api.on=0;this.events=new EventManager;return false}var j=this,f=decodeURIComponent(a.request.referrer),
l={},o=a.embed.api.version,r=a.embed.api.player_id,g=[kb,lb,jb,ib,xb,mb,Na,cd],u={onFinish:xb,onLoading:kb,onLoad:Na,onProgress:lb,onPlay:jb,onPause:ib,onSeek:mb},x=[hc,sc,qb,pb,Ka,rb,Ya,Za,sb],v=[Aa,za,La,tc,zb,uc,vc,Sa,Ta,Ga],s={changeColor:Ka},z=new EventManager;j.events=z;j.sendBack=function(t,C){t=t.replace("()","");if(o<2)t="api_"+t;e({method:t,value:C})};j.sendError=function(){P.error("API error")};j.destroy=function(){window.removeEventListener?window.removeEventListener("message",c,false):
window.detachEvent("onmessage",c)};g.forEach(function(t){z.bind(t,d)});z.bind(tc,k).bind(uc,k).bind(vc,k);window.addEventListener?window.addEventListener("message",c,false):window.attachEvent("onmessage",c)}});y.Stats=MingClass.extend({init:function(a,b){var e=b.playerType.ucfirst()+" "+b.playerMode.ucfirst(),d=window._gaq||[],c=null,k=b.playerType===Db?"local":"",j=(b.playerType===Db?"html5_"+b.playerMode:b.playerMode===ab?"mobiloop":"moogaloop")+"_"+(a.embed.on_site?k:"embed");d.push(["pt._setAccount",a.analytics.ga_account]);this.clientLog=function(){var f=new XHR,l="http://"+a.request.player_url+
"/log/client",o=["request_signature="+a.request.signature,"video="+ICanHas.video,"h264="+ICanHas.video.h264,"vp8="+ICanHas.video.vp8,"vp6="+ICanHas.video.vp6,"flash="+FlashDetect.version,"touch="+ICanHas.touch,"screen_width="+screen.width,"screen_height="+screen.height].join("&");f.post(l,o,function(){})};this.googleLog=function(f,l){l=parseInt(Number(l),10);if(isNaN(l))l=undefined;P.log("google analytics:",e,f,a.video.id,l);d.push(["pt._trackEvent",e,f,a.video.id+"",l])};this.partialPlayLog=function(f,
l,o){f=parseInt(f,10);if(f>c){var r=new XHR,g="http://"+a.request.player_url+"/log/partial";l="request_signature="+a.request.signature+"&seconds="+f+"&quality="+l;P.log("vimeo stats:",f,"seconds played");o?r.post(g,l):r.post(g,l,function(){});c=f}};this.vimeoLog=function(f,l,o,r){var g=new XHR,u="http://"+a.request.player_url+"/log/"+f+"/"+a.video.id,x="?embed_location="+a.request.referrer+"&request_signature="+a.request.signature;x+="&type="+j;if(l)x+="&quality="+l;if(o)x+="&percent="+o;P.log("vimeo stats:",
f,l,o);r?g.post(u,x):g.post(u,x,function(){})}}});if(!y.UI)y.UI={};y.UI.CanvasElement=MingClass.extend({init:function(a){if(!a)return false;
this.element=a;this.origWidth=a.getAttribute("width");this.origHeight=a.getAttribute("height");this.width=this.origWidth*Gb;this.height=this.origHeight*Gb},draw:function(a,b,e,d,c){this.setData(a).setTranslation(b).setScale(e).setColor(d).setShadow(c);this.refresh();return this},setData:function(a){this.data=a;return this},setTranslation:function(a){this.translation=a;return this},setScale:function(a){this.scale=a;return this},setColor:function(a){this.color=a;return this},setShadow:function(a){this.shadow=
a;return this},refresh:function(){var a=this.data,b=this.shadow;try{if(!a||!this.element.getContext)return false}catch(e){return false}var d=this.scale||1,c=this.translation?$m.clone(this.translation):{x:0,y:0},k=this.color||"ffffff";this.element.attr({width:this.width,height:this.height});d*=Gb;c.x*=Gb;c.y*=Gb;var j=this.element.getContext("2d"),f;j.clearRect(0,0,this.width,this.height);j.save();j.translate(c.x,c.y);j.scale(d,d);j.fillStyle=j.strokeStyle="#"+k;if(b){j.shadowOffsetX=j.shadowOffsetY=
0;j.shadowBlur=10*Gb;j.shadowColor="rgba(0,0,0,0.5)"}d=0;for(c=a.length;d<c;d++)for(f in a[d])if(b=a[d][f])if($m.isArray(b))j[f].apply(j,b);else j[f]=b;else j[f].apply(j);j.restore();return this}});y.ContextMenu=MingClass.extend({init:function(a,b,e){function d(g){(g.target.hasAncestor?!g.target.hasAncestor(f):true)&&!c.isHidden&&
c.hide()}var c=this,k=window,j=document,f=document.createElement("div"),l=[],o=!!e.win,r=!!e.mac;c.element=f;c.items=l;c.isHidden=true;c.add=function(g,u){var x=new y.ContextMenu.Item(g,c);u||(u=f);u.appendChild(x.element);l.push(x);g.type=="info"&&u.addClass(Tc)};c.remove=function(g){l.slice(g,1)};c.show=function(){c.refresh();var g=event.pageX,u=event.pageY,x=j.width,v=j.height;if(g+f.clientWidth>x)g=x-f.clientWidth-5;if(u+f.clientHeight>v)u=v-f.clientHeight-5;f.attr("style","left: "+g+"px; top: "+
u+"px;");f.removeClass(X);c.isHidden=false};c.hide=function(){f.addClass(X);c.isHidden=true};k.addEventListener("contextmenu",d,false);k.addEventListener("contextmenu",function(g){if(!(o?g&&g.ctrlKey:g&&g.metaKey)&&g.target.hasAncestor(a)){c.show();if(g.returnValue)g.returnValue=false;else if(g.preventDefault)g.preventDefault();else return false}else c.isHidden||c.hide()},false);k.addEventListener("click",d,false);k.addEventListener("blur",d,false);k.addEventListener("mousedown",function(g){var u=
g.target.hasAncestor?!g.target.hasAncestor(a):false,x=r?g&&g.metaKey:g&&g.ctrlKey;if(!c.isHidden||g&&g.button>0&&!u&&!x){g.stopPropagation&&g.stopPropagation();g.preventDefault&&g.preventDefault();g.preventCapture&&g.preventCapture()}k.focus()},false);b&&c.setData(b).refresh();f.addClass(vd);c.hide();j.getElementsByTagName("body")[0].appendChild(f)},setData:function(a){this.data=a;return this},refresh:function(){function a(){var j=document.createElement("ul");d.appendChild(j);j.addClass("index"+k);
k++;return j}function b(j,f){j.forEach(function(l){if($m.isArray(l)){c=c.children.length==0?c:a();b(l,c)}else e.add(l,f)})}var e=this,d=e.element,c,k=0;e.element.innerHTML="";c=a();b(e.data,c);return this}});y.ContextMenu.Item=MingClass.extend({init:function(a,b){this.element=document.createElement("li");this.controller=b;a&&this.setData(a).refresh()},setData:function(a){this.data=a;return this},refresh:function(){function a(){j.addClass(Sc);j.addEventListener("click",function(){window.open(c.url)},
false)}function b(){j.addClass(zc);j.innerHTML="<span>"+j.innerHTML+"</span>";var f=$m.type(c.active)==="function"?c.active.call():c.active;f&&j.addClass(gb);j.addEventListener("click",function(){(f=$m.type(c.active)==="function"?c.active.call():!c.active)?j.addClass(gb):j.removeClass(gb)},false)}function e(){j.addClass(Sc);j.addEventListener("click",function(){var f=Array.prototype.slice.call(arguments);k=="toggle"&&f.push(c.active);d.controller.hide();c.action.apply(this,f)},false)}var d=this,c=
d.data,k=d.data.type,j=d.element;j.innerHTML=$m.type(c.text)==="function"?c.text.call():c.text;if(k=="toggle")b();else if(k=="link")a();else k=="info"&&j.addClass(Tc);c.action&&e();return d}});